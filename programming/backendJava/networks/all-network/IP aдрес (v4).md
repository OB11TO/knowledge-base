---
title: IP aдрес (v4)
tags:
  - Network
related_topics: 
created: 2024-09-12 18:15
modified: 2025-03-26T18:41:24+03:00
questions: 
notes: 
links: 
---



### IP aдрес (v4)



![[Untitled 104.png]]

32 битное число, которое принято записывать 4 октетами, каждый октет разделен точкой и занимает ровно 8 бит и может принимать значения от 0 до 255. `192.168.0.1` , `172.217.16.4`

![[images/Untitled 9 4.png|Untitled 9 4.png]]

![[images/Untitled 10 3.png|Untitled 10 3.png]]

![[images/Untitled 11 3.png|Untitled 11 3.png]]

![[images/Untitled 12 3.png|Untitled 12 3.png]]

![[images/Untitled 13 3.png|Untitled 13 3.png]]

![[images/Untitled 14 2.png|Untitled 14 2.png]]

> [!faq]  Как уничтожается пакеты в сети ?
### 1. **Ошибки на физическом уровне**

- **Описание:** Пакеты могут быть потеряны из-за физических проблем с передачей данных (например, помехи в линии связи, повреждение кабеля, нестабильное соединение Wi-Fi и т.д.).
- **Как это происходит:** Если на физическом уровне возникают ошибки (например, битовые ошибки), пакеты могут быть переданы с искажениями или не дойдут до следующего узла.
- **Как обнаруживается:** Если ошибка не исправляется на физическом уровне, пакет будет отброшен. В некоторых случаях система может использовать механизм обнаружения ошибок (например, с помощью контрольной суммы), чтобы понять, что пакет повреждён и должен быть уничтожен.

### 2. **Ошибки на канальном уровне**

- **Описание:** Пакеты могут быть уничтожены на канальном уровне (например, в протоколах Ethernet или Wi-Fi), если они содержат ошибки или приходят с повреждёнными заголовками.
- **Как это происходит:** При использовании канального уровня каждый фрейм данных (пакет на этом уровне) содержит контрольную сумму для обнаружения ошибок (например, CRC). Если проверка контрольной суммы не совпадает с данными, фрейм будет уничтожен.
- **Как обнаруживается:** Фрейм считается повреждённым и уничтожается узлом на канальном уровне.

### 3. **Перегрузка на сетевом уровне (IP)**

- **Описание:** Пакеты могут быть уничтожены на маршрутизаторах или других устройствах, если происходит перегрузка сети.
- **Как это происходит:** Если буферы маршрутизатора или промежуточного устройства заполняются быстрее, чем они могут быть обработаны, новые пакеты просто отбрасываются.
- **Как обнаруживается:** Протоколы верхнего уровня, такие как TCP, обнаруживают потерю пакетов по отсутствию подтверждения (ACK) и инициируют повторную отправку.

### 4. **TTL (Time-to-Live) истек на сетевом уровне**

- **Описание:** В IP-пакетах существует поле `TTL` (Time-to-Live), которое ограничивает "время жизни" пакета в сети.
- **Как это происходит:** При каждом прохождении через маршрутизатор значение TTL уменьшается на единицу. Если TTL достигает нуля до того, как пакет достигнет пункта назначения, пакет уничтожается.
- **Как обнаруживается:** Пакет отбрасывается, и устройство, уничтожившее пакет, может отправить ICMP-сообщение (например, сообщение об истечении времени) к отправителю, уведомив его о том, что пакет не достиг цели.

> [!faq]  Как пакеты разлетаются по сети по разным маршрутизаторам, кто за это отвечает ?
### Как пакеты передаются по сети:

1. **Адресация и маршрутизация на сетевом уровне (IP):**
    
    - Пакет, отправляемый устройством (например, компьютером), сначала получает **IP-адрес** назначения.
    - Каждый маршрутизатор в сети использует информацию об IP-адресе для того, чтобы определить следующий узел (маршрутизатор или конечное устройство), куда нужно отправить пакет.
    - Пакеты могут проходить через множество маршрутизаторов до тех пор, пока не достигнут конечного пункта назначения.
2. **Роль маршрутизаторов:**
    
    - **Маршрутизатор** — это сетевое устройство, которое пересылает пакеты между различными сетями на основе их IP-адресов.
    - Маршрутизатор изучает заголовок каждого пакета, чтобы увидеть его **IP-адрес назначения**, и затем ищет наилучший маршрут для доставки пакета, опираясь на свою **таблицу маршрутизации**.
    - **Таблица маршрутизации** — это набор правил, которые маршрутизатор использует для определения следующего маршрутизатора, куда нужно отправить пакет. Она может обновляться динамически с помощью протоколов маршрутизации.
3. **Протоколы маршрутизации:** Протоколы маршрутизации управляют передачей данных в глобальной сети. Они помогают маршрутизаторам выбирать наилучший путь для передачи пакетов:
    
    - **OSPF (Open Shortest Path First)**: Протокол внутренней маршрутизации, который определяет наилучший маршрут на основе метрики "наименьшее количество промежуточных узлов".
    - **BGP (Border Gateway Protocol)**: Основной протокол маршрутизации в Интернете, который отвечает за выбор маршрутов между автономными системами (разными сетями).
    - **RIP (Routing Information Protocol)**: Простой протокол маршрутизации, который использует количество "хопов" (переходов через маршрутизаторы) для выбора пути.
4. **Маршрут может изменяться:**
    
    - Каждый раз, когда пакет проходит через маршрутизатор, он может быть перенаправлен по разным путям в зависимости от текущей загруженности сети, наличия доступных каналов связи или сбоев в работе маршрутизаторов.
    - В случае перегрузки сети или отказа какого-то маршрутизатора, протоколы маршрутизации автоматически пересчитают маршруты и перенаправят пакеты по альтернативным путям.

### Ключевые участники в процессе передачи пакетов:

1. **Отправитель (хост):** Формирует пакет, указывая в нём IP-адрес назначения.
2. **Маршрутизаторы:** На каждом этапе пути маршрутизаторы принимают пакеты, анализируют их IP-адрес и выбирают следующий узел для передачи пакетов на основе таблицы маршрутизации.
3. **Получатель (конечный хост):** Как только пакет достигает маршрутизатора, который знает, как доставить его до конечного устройства (сервер или компьютер), он передаёт пакет на сетевой интерфейс устройства.

### Как выбираются маршруты:

Маршрутизаторы выбирают пути для пакетов на основе:

- **Метрик (стоимость пути):** Например, количество хопов, задержки в сети или пропускная способность.
- **Текущей нагрузки:** В случае перегрузки сети или отказов маршрутов, пакеты могут перенаправляться другими путями.
- **Протоколов маршрутизации:** Динамические протоколы (например, BGP, OSPF) обновляют таблицы маршрутизации на основе изменений в сети и выбирают оптимальные маршруты.

### Пример:

Если вы отправляете данные из Москвы в Нью-Йорк, ваш пакет может пройти через множество промежуточных маршрутизаторов. Одни пакеты могут пройти через Европу, другие — через Северную Америку. Протоколы маршрутизации (например, BGP) определяют, какой путь будет наиболее оптимальным на момент отправки.

### Заключение:

Ответственность за передачу пакетов через сеть и выбор оптимальных маршрутов несут **сетевой уровень (IP)** и **маршрутизаторы**, использующие **протоколы маршрутизации** для пересылки пакетов по сети. Маршруты могут динамически изменяться в зависимости от состояния сети, загрузки и доступности каналов связи.

- Протоколы маршрутизации (OSPF, BGP, RIP и другие) **работают и реализованы** на маршрутизаторах.
- Эти протоколы определяют, как маршрутизаторы взаимодействуют друг с другом для обновления таблиц маршрутизации.
- Компьютеры обычно используют статическую маршрутизацию, если они не настроены как маршрутизаторы.