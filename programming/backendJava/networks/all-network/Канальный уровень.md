---
title: Канальный уровень
tags:
  - Network
related_topics: 
created: 2024-09-12 18:16
modified: 2024-09-13T17:25:29+03:00
questions: 
notes: 
links: 
---

---
[[как они обмениваются напрямую без маршрутизатора ]]

---
### Канальный уровень

Data link layer разбиваются пакеты с предыдущего уровня на кадры (frame) данных ( и наоборот, кадры преобразуются в пакеты) и производится доставка кадров в пределах одной сети, осуществляется проверка доступности среды передачи и контроль ошибок передачи.  
Основные протоколы транспортного уровня  
`Ethernet, PPP(Point to Point Protocol), PPpoE(разновидность Point to Point Protocol)`

![[Untitled 18.png]]

![[Untitled 19.png]]

![[Untitled 20.png]]

![[Untitled 21.png]]


<mark class="hltr-red">MAC-адрес (Media Access Control)</mark> выполняет важные функции в сетях и работает в связке с IP-адресами. Чтобы лучше понять его необходимость, давайте рассмотрим, **почему одного IP-адреса и сетевой маски недостаточно**, и как MAC-адрес вписывается в эту архитектуру.

### Зачем нужен MAC-адрес?

1. **Работа на канальном уровне (уровень 2 модели OSI)**:
    
    - MAC-адрес — это уникальный физический адрес сетевого устройства (сетевой карты), который необходим для передачи данных внутри одной локальной сети (LAN).
    - В то время как **IP-адрес** используется для маршрутизации данных в глобальных сетях (например, в Интернете), **MAC-адрес** помогает доставить данные **от устройства к устройству в пределах одной физической сети**. Например, внутри вашего дома, офиса или дата-центра.
2. **Разделение логических и физических уровней адресации**:
    
    - **IP-адрес** — это **логический адрес**, который может меняться, например, при подключении к разным сетям или при смене конфигурации сети (например, при использовании DHCP).
    - **MAC-адрес** — это **уникальный идентификатор устройства**, который назначается производителем сетевой карты и остается постоянным. Это гарантирует, что каждое устройство в локальной сети можно однозначно идентифицировать независимо от того, как оно подключено к глобальной сети.

### Почему не хватает только IP-адреса и маски?

1. **IP-адреса работают только на уровне 3 (сетевом уровне) OSI**:
    
    - IP-адреса и маски подсети важны для маршрутизации данных между различными сетями (например, между домашней сетью и Интернетом). Но они не используются для непосредственной передачи данных между устройствами внутри одной сети.
    - Для непосредственного взаимодействия сетевых устройств на канальном уровне (уровень 2) нужно что-то более "физическое", как MAC-адрес.
2. **Прямая передача данных между устройствами в одной сети**:
    
    - Когда данные передаются от одного устройства к другому в пределах одной локальной сети, **маршрутизатор не участвует**. Здесь требуется механизм для доставки данных на правильное устройство внутри сети — именно для этого нужен MAC-адрес.
    - **Коммутатор (Switch)**, работающий на канальном уровне, использует MAC-адреса для передачи данных между устройствами в пределах одной LAN. Коммутатор хранит таблицу MAC-адресов и знает, на какой порт отправить данные.
3. **ARP (Address Resolution Protocol)**:
    
    - Когда устройство знает IP-адрес назначения, но не знает MAC-адрес в локальной сети, оно использует **протокол ARP** (Address Resolution Protocol) для сопоставления IP-адреса с MAC-адресом.
    - Например, если ваше устройство хочет отправить данные на IP-адрес в локальной сети, оно сначала отправит ARP-запрос, чтобы узнать MAC-адрес устройства с этим IP. После получения ответа данные будут переданы на уровень 2 с MAC-адресом назначения.
4. **Разные уровни адресации для разных целей**:
    
    - **IP-адрес** используется для маршрутизации данных через Интернет, он может изменяться при подключении к разным сетям (динамически через DHCP).
    - **MAC-адрес** — неизменяемый аппаратный идентификатор сетевой карты, используемый для передачи данных в пределах одной сети.

### Пример работы IP и MAC в связке

Допустим, компьютер в сети отправляет данные на другой компьютер в той же сети:

1. Компьютер A хочет отправить данные на компьютер B и знает его IP-адрес (например, 192.168.1.100).
2. Однако компьютер A не знает MAC-адрес компьютера B.
3. Компьютер A отправляет ARP-запрос: "Кто имеет IP 192.168.1.100? Отправьте мне ваш MAC-адрес".
4. Компьютер B отвечает с указанием своего MAC-адреса.
5. Теперь компьютер A может отправить данные, указывая MAC-адрес компьютера B, а не IP-адрес, так как локальная передача данных внутри сети происходит на уровне 2.

### Заключение

MAC-адрес н<mark class="hltr-yellow">еобходим для локальной доставки данных в пределах одной сети, где IP-адресов недостаточно для непосредственной связи устройств</mark>. Хотя IP-адрес и сетевой уровень (уровень 3) управляют маршрутизацией данных в глобальной сети, именно MAC-адреса и канальный уровень (уровень 2) позволяют сетевым устройствам общаться между собой внутри локальной сети напрямую.



А [[как они обмениваются напрямую без маршрутизатора ]] через что если всё через wi fi

