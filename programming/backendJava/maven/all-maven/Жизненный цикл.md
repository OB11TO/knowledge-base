---
title: Жизненный цикл
tags:
  - Maven
related_topics: 
created: 2024-09-16 17:39
modified: 2024-09-17T15:33:43+03:00
questions: 
notes: 
links: 
---

### Жизненный цикл

Все команды maven делятся на три группы – lifecycles. Их называют **жизненными циклами**, так как они задают порядок фаз, которые выполняются во время сборки или определенного жизненного цикла, потому что не все действия Maven являются сборкой.
<mark class="hltr-pink">Phase - это вообще ENUM Java</mark>

<mark class="hltr-red">Всего жизненных циклов три</mark> `clean`, `default`, `site`

<mark class="hltr-yellow">Формально, список фаз можно изменять, хотя необходимость в этом бывает редк</mark>о.

<mark class="hltr-orange">Порядок фаз</mark> `clean`  (<mark class="hltr-green2">используется для того, чтобы полностью очистить папку target</mark>):

1. `pre-clean`
2. `clean`
3. `post-clean`

По умолчанию если вызвать goal фазы default, то clean не вызывается, но можно настроить конфигурацию и добавить вызов _(Подробнее об этом в разделе Goals.)_ либо через terminal вызвать mvn clean install.

```XML
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-clean-plugin</artifactId>
        <version>3.2.0</version>
        <executions>
          <execution>
            <goals>
              <goal>clean</goal>
            </goals>
            <phase>validate</phase>
          </execution>
        </executions>
      </plugin>
```

  

<mark class="hltr-orange">Порядок фаз</mark> **defaul**t:

1. `validate` Подтверждает, является ли проект корректным и вся ли необходимая информация доступа для завершения процесса сборки
2. `initialize` Инициализирует состояние сборки, например, различные настройки.
3. `generate-sources` Включает любой исходный код в фазу компиляции.
4. `process-sources` Обрабатывает исходный код (подготавливает). Например, фильтрует определённые значения.
5. `generate-resources` Генерирует ресурсы, которые должны быть включены в пакет.
6. `process-resources` Копирует и отправляет ресурсы в указанную директорию. Это фаза перед упаковкой.
7. `compile` Комплирует исходный код проекта.
8. `process-classes` Обработка файлов, полученных в результате компиляции. Например, оптимизация байт-кода Java классов.
9. `generate test-sources` Генерирует любые тестовые ресурсы, которые должны быть включены в фазу компиляции.
10. `process-test-sources` Обрабатывает исходный код тестов. Например, фильтрует значения.
11. `test-compile` Компилирует исходный код тестов в указанную директорию тестов.
12. `process-test-classes` Обрабатывает файлы, полученные в результате компиляции исходного кода тестов.
13. `test` Запускает тесты, используя приемлемый фреймворк юнит-тестирования (например, Junit).
14. `prepare-package` Выполняет все необходимые операции для подготовки пакет, непосредственно перед упаковкой.
15. `package` Преобразует скомпилированный код и пакет в дистрибутивный формат. Такие как JAR, WAR или EAR.
16. `pre-integration-test` Выполняет необходимые действия перед выполнением интеграционных тестов.
17. `integration-test` Обрабатывает и распаковывает пакет, если необходимо, в среду, где будут выполняться интеграционные тесты.
18. `post-integration-test` Выполняет действия, необходимые после выполнения интеграционных тестов. Например, освобождение ресурсов.
19. `verify` Выполняет любые проверки для подтверждения того, что пакет пригоден и отвечает критериям качества.
20. `install` Устанавливает пакет в локальный репозиторий, который может быть использован как зависимость в других локальных проектах.
21. `deploy` Копирует финальный пакет (архив) в удалённый репозиторий для, того, чтобы сделать его доступным другим разработчикам и проектам.

  

<mark class="hltr-orange">Порядок фаз</mark> `**site**` используется для создания докладов, документации, развёртывания и т.д.:

1. `pre-site`
2. `**site**`
3. `post-site`
4. `site-deploy`
