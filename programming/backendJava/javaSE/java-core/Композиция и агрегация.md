---
title: Композиция и агрегация
tags:
  - JavaSE
  - OOP
related_topics: 
created: 2024-08-30 13:42
modified: 2025-01-13T16:57:33+03:00
difficulty: easy
questions: 
notes: 
links: 
---

## Полное описание
Существует несколько видов взаимодействия объектов, объединенных под общим понятием "`Has-A Relationship`" или "`Part Of Relationship"`. Это отношение означает, что <mark class="hltr-yellow">один объект является составной частью другого объекта.</mark>

Существует два подвида этого отношения: если один ==объект создает другой объект и время жизни "части" зависит от времени жизни целого, то это называется== "`композиция`", если же ==один объект получает ссылку (указатель) на другой объект в процессе конструирования, то это уже== `агрегация`.
![[Pasted image 20240830134423.png]]
==Плюсы композиции:==

1. Сильная связь: Композиция предполагает наличие сильной связи между объектами, что позволяет образовывать цельные, взаимосвязанные структуры.
2. Управление жизненным циклом:<mark class="hltr-green2"> Объект, включающий другой объект, полностью управляет его созданием, инициализацией, и удалением.</mark>
3. Инкапсуляция: Композиция позволяет скрыть реализацию составляющих объектов от внешнего мира, что способствует обеспечению инкапсуляции и улучшает модульность кода.

==Минусы композиции:==

1. Высокая сложность: Композиция может привести к более сложному дизайну и реализации классов, особенно при использовании глубокой вложенности объектов.
2. Усложнение отладки: Композиция может сделать отладку программы более сложной из-за сложной взаимосвязи и зависимостей между объектами.
3. Риск циклических зависимостей: Неправильное проектирование композиции может привести к циклическим зависимостям между классами, что затруднит рефакторинг и сопровождение кода.

```java
class Address {
    private String city;
    private String street;

    public Address(String city, String street) {
        this.city = city;
        this.street = street;
    }
}

class Person {
    private String name;
    private Address address;

    public Person(String name, String city, String street) {
        this.name = name;
        **this.address = new Address(city, street);**
    }
}
```

==Плюсы агрегации:==

1. Слабая связь: Агрегация предполагает более слабую связь между объектами, что делает их более независимыми друг от друга.
2. Гибкость: Объекты, связанные агрегацией, могут быть повторно использованы и использованы с различными контекстами, что повышает гибкость системы.
3. Управление жизненным циклом: В отличие от композиции, управление жизненным циклом составляющих объектов остается за пределами объекта-агрегатора.

==Минусы агрегации:==

1. Отсутствие прямой ответственности: Объект-агрегатор не полностью управляет жизненным циклом составляющих объектов, что может привести к их неправильному использованию или утечкам памяти.
2. Ограниченный контроль: Отсутствие прямой связи может затруднить контроль над изменениями состояния и поведения объектов, связанных агрегацией.
3. Меньшая инкапсуляция: В отличие от композиции, агрегация может привести к меньшей инкапсуляции, так как объекты могут иметь более широкий доступ к состоянию друг друга.

```java
class Address {
    private String city;
    private String street;

    public Address(String city, String street) {
        this.city = city;
        this.street = street;
    }
}

class Person {
    private String name;
    private Address address;

    **public Person(String name, Address address) {
        this.name = name;
        this.address = address;
    }**
}
```


![[Pasted image 20250113165658.png]]
![[Pasted image 20250113165716.png]]
![[Pasted image 20250113165723.png]]
![[Pasted image 20250113165734.png]]
