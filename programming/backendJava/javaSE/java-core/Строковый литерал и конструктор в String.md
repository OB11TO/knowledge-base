---
title: Строковый литерал и конструктор в String
tags:
  - JavaSE
  - String
related_topics: 
created: 2024-09-04 12:29
modified: 2024-09-04T12:37:10+03:00
difficulty: easy
questions: 
notes: 
links: 
---
### 1. **<mark class="hltr-orange">Строковый литерал</mark>**

- **Пример:** `String s1 = "cat";`
- **Как работает:**
    - <mark class="hltr-red">JVM</mark> сначала <mark class="hltr-red">проверяет</mark>, существует ли строка `"cat"` <mark class="hltr-red">в пуле строк (String Pool).</mark>
    - Если строка уже существует, переменной `s1` присваивается ссылка на существующий объект.
    - Если строка не существует, создается новый объект строки в пуле, и переменная `s1` получает ссылку на него.
- **Память:** Используется пул строк, который оптимизирует память, поскольку одинаковые строки не дублируются, а делят один объект между всеми ссылками.

### 2. **Конструктор `new String()`**

- **Пример:** `String s2 = new String("cat");`
- **Как работает:**
    - В этом случае <mark class="hltr-red">JVM</mark> **всегда** <mark class="hltr-red">создает новый объект строки в куче</mark> (heap), <mark class="hltr-red">даже если строка</mark> `"cat"`<mark class="hltr-red"> уже существует в пуле строк.</mark>
    - В переменную `s2` записывается ссылка на новый объект.
    - Строка, переданная в конструктор, может быть получена из пула строк (если она создана с использованием литерала), но конструктор `new String()` гарантирует создание нового объекта.
- **Память:** Всегда создается новый объект строки, что может приводить к избыточному потреблению памяти, если не использовать конструктор с осторожностью.

### **Сравнение и отличия:**

- **Пул строковых литералов:**
    
    - При использовании строкового литерала, строки хранятся в пуле строк, что позволяет JVM экономить память за счет повторного использования существующих строк.
    - При использовании `new String()`, строка не попадает в пул и создается новый объект в куче, даже если строка с таким же содержимым уже существует.
- **Экономия памяти:**
    
    - Строковые литералы позволяют экономить память, используя один и тот же объект для одинаковых строк.
    - `new String()` не делает такого оптимизации и всегда создает новый объект.
- **Сравнение объектов:**
    
    - При использовании литералов две переменные могут ссылаться на один и тот же объект (если их значения одинаковы), так что `s1 == s2` может быть `true`.
    - При использовании `new String()`, даже если строки имеют одинаковое содержимое, ссылки (`==`) на них будут разные, так что `s1 == s2` будет `false`, но `s1.equals(s2)` будет `true`.

### Пример кода:

```java
String s1 = "cat"; 
String s2 = "cat"; 
String s3 = new String("cat");  
System.out.println(s1 == s2); // true, обе переменные ссылаются на один и тот же объект в пуле 
System.out.println(s1 == s3); // false, s3 ссылается на новый объект в куче 
System.out.println(s1.equals(s3)); // true, содержимое строк одинаковое
```

### Вывод:

- Использование строковых литералов предпочтительнее с точки зрения оптимизации памяти.
- Использование `new String()` создает новый объект, что может быть необходимо в специфических случаях, но обычно это не оптимально и ведет к лишнему расходу памяти.