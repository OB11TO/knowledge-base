---
title: volatile
tags:
  - Multithreading
related_topics: 
created: 2024-09-11 12:33
modified: 2024-09-11T12:34:07+03:00
questions: 
notes: 
links: 
---
### volatile

Ключевое слово `volatile` в Java используется для обеспечения видимости изменений переменной между потоками и предотвращения оптимизаций, которые могли бы нарушить эту видимость. То есть простыми словами, каждый поток имеет свой собственный кэш и volatile запрещает его использовать для потоков. Данные всегда будут браться из основной памяти и записываться в основную память.

```Java
public class SynchronizedVolatileCounter {
    private volatile int count = 0;

    public synchronized void increment() {
        count++; // Атомарная операция благодаря synchronized
    }

    public int getCount() {
        return count;
    }
}
```

Основные цели использования `volatile` включают в себя:

1. **Обеспечение видимости изменений:** Когда переменная объявлена как `volatile`, изменения, внесенные одним потоком в эту переменную, будут немедленно видны всем другим потокам. Это гарантирует, что обновленное значение переменной не будет кэшироваться локально в потоках и будет доступно всем.
2. **Предотвращение переупорядочивания инструкций:** Компилятор и/или аппаратное обеспечение могут переупорядочивать инструкции в коде для оптимизации производительности. `volatile` предотвращает переупорядочивание инструкций вокруг операций с `volatile` переменными, что может быть критически важно в многопоточных сценариях.
3. **Синхронизация потоков:** Хотя `volatile` не предоставляет полной синхронизации, он обеспечивает атомарность операций чтения и записи для примитивных типов данных (таких как `int`, `boolean`, `long`, `float`, `double`) и может использоваться для создания простых синхронизационных механизмов.
