---
title: JVM
tags:
  - JavaSE
related_topics: 
created: 2024-12-12 15:29
modified: 2025-04-04T12:34:25+03:00
questions: 
notes: 
links: 
---

---
[[JRE, JDK, JVM]]
[[Виды JVM и их отличия ]]
 
[[Байт-код Java]]

[[Classloaders]]

[[Виртуальная память и потоки]]

[[Heap JVM]]
[[Stack JVM]]
[[Method Area JVM]]
[[PC Register JVM]]
[[Native Method Stack]]
   
[[Garbage Collector]]

[[Interpreter]]
[[Just-In-Time (JIT)]]
[[Ahead-Of-Time (AOT)]]

[[Native Interface (JNI - Java Native Interface)]]

[[JVM Агенты]]

[[Флаги JVM]]

----
[[OSGi]]

[[Дополнительные JVM приемы]]

[[JVM job4j]]

----


![[Pasted image 20241212154050.png]]

![[Pasted image 20241212161028.png]]

![[Pasted image 20241212175415.png]]


---

 ![[Pasted image 20241217163546.png]]

  ![[Pasted image 20241217163646.png]]
  ![[Pasted image 20241217163728.png]]
![[Pasted image 20241217163820.png]]

- <mark class="hltr-red">Классы могут иметь одинаковые имена, так как они имеют имя (имя класса + имя загрузчика, который загрузил класс)</mark>
![[Pasted image 20241217164023.png]]


----

![[Pasted image 20241217164219.png]]
![[Pasted image 20241217164259.png]]

### **Ключевая проблема в байт-коде**

В **JVM** есть **верификатор байт-кода** (Bytecode Verifier), который работает на этапе **линковки** класса (во время загрузки класса в JVM). Этот верификатор проверяет байт-код на корректность до его исполнения.

Одна из **ключевых проверок** верификатора:

- **Глубина стека** на всех возможных путях выполнения к каждой инструкции должна быть **одинаковой**.

В представленном байт-коде:

1. **bipush 2** загружает элемент в стек.
2. **goto 0** заставляет байт-код бесконечно возвращаться на начало метода.
3. Таким образом, на каждой итерации глубина стека будет увеличиваться, что нарушает требование **одинаковости глубины стека** на всех путях выполнения.

---

### **Когда это проверяется?**

- **До исполнения кода!**  
    JVM не запустит байт-код, который не прошёл верификацию. Проверка на корректность — **статический анализ байт-кода**.

---
 
### **Почему ответ D?**

1. **VerifyError** действительно должен возникнуть, так как байт-код некорректен.
2. Однако, как вы отметили, верификация класса происходит **до выполнения** байт-кода. Следовательно, сам байт-код **не будет исполнен**, так как JVM **не загрузит класс** из-за ошибки верификации.

Таким образом:

- Ответ **D**: Байт-код **не исполнится**.

---

### **Заключение**

Ваше объяснение на 100% верно! Верификатор JVM выявит нарушение правила глубины стека и **не допустит выполнение** этого байт-кода. Именно поэтому правильный ответ — **D**

**Ключевой момент**: верификация байт-кода — это **статическая проверка**, происходящая **до выполнения** на этапе загрузки и линковки класса.


----

![[Pasted image 20241217170407.png]]

----

![[Pasted image 20241217171829.png]]


---

  ![[Pasted image 20241217172553.png]]
   ![[Pasted image 20241217172648.png]]
   ![[Pasted image 20241217172702.png]]
   ![[Pasted image 20241217172714.png]]
   ![[Pasted image 20241217172805.png]]

 ![[Pasted image 20241217172911.png]]

 -  Так вот как раз таки <mark class="hltr-yellow">в реали все jvm хотят как можно быстрее перестать интерпретировать байт код</mark>. <mark class="hltr-green2">Хотят компелировать в машшиный код и исполнять на процессоре</mark>. И когда jvm это делает до исполнения или после исполнения не имеет большого значения, но jvm это не только же подсистема исполнения java байт кода.  Много чего другого!
 - <mark class="hltr-red">В любой jvm всё должно присутствовать, вся мета информация про рефлекшн должна быть в исполняемом файле.</mark> 

![[Pasted image 20241217174827.png]]

- <mark class="hltr-red">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</mark>
![[Pasted image 20241217175253.png]]


-------

![[Pasted image 20241217175335.png]]

---

![[Pasted image 20241217175445.png]]
![[Pasted image 20241217175733.png]]

- <mark class="hltr-yellow">Использовать</mark> <mark class="hltr-red">volotile</mark>, <mark class="hltr-yellow">чтобы не было проблем </mark>
![[Pasted image 20241217175905.png]]
![[Pasted image 20241217180026.png]]


---------

![[Pasted image 20241217180101.png]]
![[Pasted image 20241217180138.png]]
![[Pasted image 20241217180229.png]]
![[Pasted image 20241217180447.png]]

![[Pasted image 20241217180659.png]]
![[Pasted image 20241217180920.png]]
![[Pasted image 20241217181014.png]]
![[Pasted image 20241217181900.png]]
![[Pasted image 20241217181913.png]]
![[Pasted image 20241217182029.png]]

![[Pasted image 20241217182852.png]]
![[Pasted image 20241217182931.png]]
 ![[Pasted image 20241217183017.png]]


-----

![[Pasted image 20241217183104.png]]
![[Pasted image 20241217183224.png]]
![[Pasted image 20241217183338.png]]
 