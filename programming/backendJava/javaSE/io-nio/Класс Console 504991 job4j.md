---
title: Класс Console 504991 job4j
tags:
  - IO-NIO
  - Job4j
related_topics: 
created: 2025-01-20 16:57
modified: 2025-01-20T17:07:24+03:00
questions: 
notes: 
links: 
---

В этом уроке мы познакомимся с классом Console. 

<mark class="hltr-green2">Класс Console предназначен для работы с консолью - командной строкой Windows или терминалом Linux/MacOS и упрощает работу с ними</mark>. Класс Console определён в пакете java.io. 

<mark class="hltr-yellow">Для консольного ввода-вывода этот класс использует уже запущенные в системе потоки System.in и System.out</mark>. 

Объект класса консоль можно получить с помощью метода System.console():
```java
Console console = System.console();
```

Доступ к консоли (командной строке) можно получить только из самой командной строки. Попытка получить объект консоли в любой среде разработки вернёт null, поэтому полученный объект требуется проверять на null.

Создадим класс ConsoleDemo в пакете io и добавим туда следующий метод main():

```java
package ru.job4j.io;

import java.io.Console;
import java.util.Arrays;

public class ConsoleDemo {

    public static void main(String[] args) {
        String login;
        char[] charPassword;
        Console console = System.console();
        if (console == null) {
            System.out.println("Консоль недоступна");
            return;
        }
        login = console.readLine("%s", "Введите логин: ");
        console.printf("Ваш логин: %s\n", login);
        charPassword = console.readPassword("%s", "Введите пароль: ");
        System.out.println("Ваш пароль: " + String.valueOf(charPassword));
        Arrays.fill(charPassword, ' ');
    }

}
```

В данной программе мы сначала получаем объект консоли (командной строки), далее с помощью методов этого объекта сохраняем логин и пароль от пользователя, выводя эти данные на экран.

При запуске этой программы в среде разработки IDEA мы получим вывод:
![[Pasted image 20250120165906.png]]

<mark class="hltr-orange">Наша JVM запущена не из стандартной интерактивной консоли операционной системы, а из среды разработки, поэтому у неё нет связи с консолью (командной строкой), соответственно, мы не можем получить объект консоли и взаимодействовать с ней.</mark>

<mark class="hltr-green2">Чтобы получить доступ к консоли (командной строке), нужно запустить программу непосредственно из неё. Прежде, чем мы это сделаем, разберем полезные методы класса Console и саму программу:  </mark>

- readLine() - читает с консоли строку, которую ввёл пользователь. Сохраняет данные в String.

- readPassword() - читает с консоли строку, которую ввёл пользователь. Отличие от метода readLine() в том, что вводимые пользователем символы не будут отображаться на консоли в целях безопасности. Сохраняет данные в char[] - массив байтов.

- format() и printf() - эти методы мы уже знаем. format() сохраняет отформатированную строку, а printf() выводит отформатированную строку на печать без сохранения.

- flush() - принудительно выводит в консоль все данные, находящиеся в буфере в данный момент.

В следующих строках
```java
 Console console = System.console();
 if (console == null) {
     System.out.println("Консоль недоступна");
     return;
 }

```

получаем объект консоли и проверяем, что он присутствует. Если объекта нет (null), то с помощью оператора return выходим из метода, так как больше в этом методе делать нечего, если нет объекта. Данная проверка обязательна, так как программа может быть запущена из разных мест, соответственно, нужно удостовериться, что из этого места есть доступ к консоли (командной строке).

В следующих строках с помощью метода readLine() мы принимаем строку от пользователя.
```java
login = console.readLine("%s", "Введите логин: ");
console.printf("Ваш логин: %s\n", login);

```

Обратите внимание на вариант метода readLine() - в него сразу передаётся сообщение, которое нужно вывести при запросе данных у пользователя. Также здесь демонстрируется работа метода printf().

Далее таким же образом запрашиваем и сохраняем у пользователя пароль:
```java
charPassword = console.readPassword("%s", "Введите пароль: ");
System.out.println("Ваш пароль: " + String.valueOf(charPassword));

```

Когда пользователь будет вводить пароль, символов на экране видно не будет, но при нажатии клавиши Enter введённые данные будут сохранены.

**Важно!** <mark class="hltr-red">Переменная charPassword - это массив байтов. Такой тип выбран специально, так как если хранить пароль в обычной строке, то это чревато тем, что вредоносные программы могут сохранить дамп памяти и изъять оттуда все логины, пароли и любую другую информацию, которая находилась в памяти на момент сохранения дампа. Дамп памяти - это текущее содержимое оперативной памяти одного процесса или всей ОС. В случае с паролем минус строки (String) - это её неизменяемость, к тому же все созданные строки попадают в пул строк. Пул строк мы будем проходить далее на этом уровне. Это специальное место в памяти, где сохранены все созданные в программе строки. Сохранённый в строку пароль будет храниться в пуле строк до конца работы программы. Это плохо.
</mark>

<mark class="hltr-green2">При работе с чувствительными данными важно, чтобы после получения их в память время нахождения этих данных в памяти было минимальным. Поэтому вместо типа String выбран тип char[], то есть массив байтов, содержимое которого мы можем сразу же "затереть" после получения и обработки чувствительных данных (В примере данные из массива символов превращаются в строку с помощью метода valueOf() исключительно с целью демонстрации пароля в консоли).</mark>

В следующей строке метод fill() затирает все данные в массиве пробелами:
```java
Arrays.fill(charPassword, ' ');

```
Таким способом мы максимально ограничили время присутствия чувствительных данных в памяти.

Теперь откроем программу в консоли (командной строке). Чтобы открыть консоль, нажимаем Win + R, далее в открывшемся окне прописываем "cmd":

![[Pasted image 20250120170009.png]]
![[Pasted image 20250120170021.png]]

**Документация:**

[Console](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/Console.html)

