---
title: Буферизированные потоки 504979 job4j
tags:
  - IO-NIO
  - Job4j
related_topics: 
created: 2025-01-20 10:20
modified: 2025-01-20T10:24:54+03:00
questions: 
notes: 
links: 
---


Буферизированный поток - это стандартный поток, к которому добавлен специальный буфер в памяти, который увеличивает производительность чтения и записи. Обращение к ресурсу при чтении/записи - это очень затратный процесс, поэтому чем меньше обращений к ресурсу - тем лучше. Буферизированные потоки - это обёртки обычных потоков с буфером.

Зачем нужен буфер? Манипуляции с буфером происходят быстрее, чем манипуляции напрямую с внешним ресурсом (Например, сетью или жестким диском). Буфер выгоден тем, что при записи данных на диск, данные не пишутся непосредственно на ресурс (диск), а сохраняются в буфере потока. В этом случае данные будут записаны на диск либо при закрытии потока, либо при явном вызове метода flush(), который переводит накопленные буфером данные в поток

Главный плюс буфера в том, что мы не обращаемся к диску за каждой единицей данных. Если нам нужно считать данные, то в буфер считается больший объем, чем нужно, и при следующем чтении оно будет производится из буфера, не обращаясь к ресурсу. Так же и при записи, например, на диск данные будут записываться сразу большими блоками.

Как уже говорилось выше, каждое обращение к внешнему ресурсу - дорогостоящая операция. Например, метод read() в нашей программе инициирует системный вызов, который обращается к операционной системе для выполнения операции чтения с ресурса. Аналогично и с методом write(). Запросы к ОС сопровождаются дополнительной тратой времени и ресурсов. Буфер помогает уменьшить количество таких обращений, соответственно, ускоряет работу программы. Считав данные в буфер, мы можем работать с его данными внутри программы, не обращаясь для этого к ОС.

Все buffered* классы являются обёртками и не могут существовать сами по себе. При создании объектов этих классов в их конструкторы нужно передавать объекты классов-реализаций InputStream/OutputStream. Могут быть и цепочки обёрток, но в корне всегда должен быть байтовый или символьный поток.

![[Pasted image 20250120102443.png]]

В заключение можно сказать, что в уроках по IO в показательных целях могут применяться различные байтовые и символьные потоки для чтения различных типов данных, но нужно запомнить важный момент: если нужно работать только с текстовыми (символьными) данными, <mark class="hltr-green2">то рекомендуется использовать символьные потоки и их обёртки (*Reader / *Writer), а если данные имеют байтовый или смешанный вид, то рекомендуется применять байтовые потоки и их обёртки (*InputStream / *OuputStream). Это важно не только с точки зрения производительности, но и с точки зрения целостности данных.</mark> Например, нельзя прочитать файл png символьным потоком, так как *.png файл содержит только байтовые данные, которые невозможно привести к символам.

