---
title: Общая информация
tags:
  - ApacheTomcat
  - JavaEE
related_topics: 
created: 2024-09-11 12:52
modified: 2024-11-07T14:04:28+03:00
questions: 
notes: 
links: 
---

### Общая информация

[https://tomcat.apache.org/download-10.cgi](https://tomcat.apache.org/download-10.cgi)

==По свой сути это обычное== ==Java приложение,== ==которое может обрабатывать== ==HTTP== ==запросы.==

![[images/Untitled 145.png|Untitled 145.png]]

==Структура Apache TomCat==

- ==Сервлет== - extendts `HttpServlet`.
- ==Сервлеты== это мапа с ключом по url (путь)
- При первом вызове ==сервлета==, ==сначала нужно загрузить== его в я `jvm,` ==потом создается объект и вызывается метод== `init()` (ВСЁ ЭТО ПРОИСХОДИТ 1 РАЗ)

![[images/Untitled 1 7.png|Untitled 1 7.png]]

- `/bin` директория, где ==собран сам Apache Tomcat с различными скрипта для запуск==а, рестарта и т.д.
- `/conf` - где собраны ==конфигурационные файлы==
- `/lib` где собраны `jar` ==файлы==, необходимые для Apache Tomcat (сторонние зависимости)
- `/logs` - по умолчанию пустая, туда записываются ==логи==
- `/webapps` - там, где будут лежать ==приложения пользователя==  
      
      
    ==В каждом веб приложении есть папка== `WEB-INF`, которая по своей сути является `private` ==директорией==, там можно ==хранить== `html` страницы, ==к которым невозможно получить доступ.==

Папка `WEB-INF` обычно располагается внутри директории веб-приложения, которую вы разрабатываете. Если вы используете структуру стандартного веб-приложения Java EE, то папка `WEB-INF` должна находиться внутри каталога `src/main/webapp` вашего проекта. Вот пример структуры проекта Gradle:

```CSS

your-project/
├── src/
│   └── main/
│       └── webapp/
│           ├── WEB-INF/
│           │   ├── classes/
│           │   ├── lib/
│           │   └── web.xml
│           ├── index.jsp
│           └── other-web-resources...
├── build.gradle
└── other-files...

```

В этой структуре `WEB-INF` содержит следующие поддиректории:

- `classes/`: Здесь хранятся скомпилированные классы Java вашего приложения.
- `lib/`: Этот каталог содержит JAR-файлы библиотек и зависимостей вашего приложения.
- `web.xml`: Этот файл представляет собой дескриптор развертывания (deployment descriptor) вашего веб-приложения, где вы можете настроить параметры сервлетов, фильтров, слушателей событий и другие конфигурационные параметры.

После сборки проекта Gradle и создания war-файла, структура `WEB-INF` останется внутри war-архива. Когда вы развернете этот war-файл в Tomcat (скопируете его в каталог `webapps`), Tomcat автоматически распакует архив и разместит `WEB-INF` внутри директории развернутого веб-приложения.

![[images/Untitled 2 6.png|Untitled 2 6.png]]

### Что такое **Tomcat** и как он работает?

**Apache Tomcat** — это легкий веб-сервер и контейнер сервлетов, который предназначен для выполнения Java веб-приложений, в частности **Java Servlets** и **JSP** (JavaServer Pages). Tomcat выступает как среда выполнения (runtime environment) для Java веб-приложений, обеспечивая выполнение кода, управление жизненным циклом приложений и обработку HTTP-запросов.

### Взаимодействие с браузером

Когда вы вводите URL в браузере и отправляете HTTP-запрос:

1. **Браузер** отправляет запрос на сервер (Tomcat), используя HTTP-протокол.
2. **Tomcat** принимает этот запрос и определяет, какому Java веб-приложению и какому сервлету его передать, используя внутренний механизм маппинга запросов.
3. Запрос передается в **сервет** (Java-код), который обрабатывает его и формирует ответ (например, сгенерированный HTML-код).
4. **Tomcat** возвращает результат обработки обратно браузеру в виде HTTP-ответа, который содержит данные (HTML, JSON и т.д.), которые браузер отобразит.

### Почему поднимаем Java-приложения в Tomcat?

Tomcat нужен для:

1. **Запуска и управления сервлетами и JSP**. Он предоставляет среду выполнения, которая поддерживает спецификации Java EE для веб-приложений.
2. **Обработки HTTP-запросов и ответов**. Tomcat принимает запросы от клиентов (например, браузеров), перенаправляет их в соответствующие сервлеты, которые отвечают на запросы.
3. **Управления жизненным циклом приложений**. Tomcat автоматически загружает, инициализирует и завершает работу приложений при необходимости.

### Можно ли обойтись без Tomcat?

Теоретически, можно обойтись без Tomcat, но это требует выполнения всех его функций вручную:

1. **Реализация собственного HTTP-сервера**. Придется написать собственный сервер для обработки HTTP-запросов и ответов.
2. **Управление Servlet-контейнером**. Потребуется реализовать поддержку Java Servlets, управления их жизненным циклом и многопоточности.

Однако это было бы сложнее и менее эффективно, чем использование готового контейнера, как Tomcat.

### Как браузер знает, куда отправлять запросы?

Когда вы вводите URL в браузер, происходит следующее:

1. **DNS (Domain Name System)**: Браузер отправляет запрос на DNS-сервер, чтобы найти IP-адрес сервера, связанный с доменным именем.
2. **Запрос отправляется на сервер** с найденным IP-адресом.
3. **Порт** (обычно 80 для HTTP или 443 для HTTPS) указывает, какой сервис на сервере должен обработать запрос (веб-сервер, например Tomcat).

### Как Tomcat перенаправляет запросы в Java-приложение?

Когда Tomcat получает HTTP-запрос:

1. **Определение контекста**: Tomcat анализирует URL-запроса и находит соответствующий **контекст** (веб-приложение), зарегистрированный в его конфигурации.
2. **Маппинг сервлетов**: Внутри контекста Tomcat использует **web.xml** или аннотации сервлетов, чтобы определить, какому сервлету или JSP нужно передать запрос.
3. **Обработка и генерация ответа**: Соответствующий сервлет обрабатывает запрос, и результат передается обратно через Tomcat в виде HTTP-ответа.

### Вывод

Tomcat — это важный компонент для выполнения Java веб-приложений. Он обеспечивает взаимодействие с браузером, принимает запросы, передает их в Java-код, и возвращает результат. Хотя можно обойтись без него, это было бы значительно сложнее.